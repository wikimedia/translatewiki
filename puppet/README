== Bootstrap process ==

=== OS upgrade ===
From a clean server, installed with Debian 9 (Stretch):

apt-get update
apt-get upgrade
apt-get dist-upgrade
sed -i 's/stretch/buster/g' /etc/apt/sources.list
apt update
apt upgrade
apt dist-upgrade
apt autoremove
shutdown -r now

=== Heyholder ===
Copy/create the following files
* /root/keyholder/l10n-bot
* /root/keyholder/l10n-bot.pub

=== Puppet ===
wget https://apt.puppetlabs.com/puppet6-release-buster.deb
dpkg -i puppet6-release-buster.deb
apt update
apt install -y git puppet-agent make librarian-puppet
gem install librarian-puppet
cd /root
git clone https://gerrit.wikimedia.org/r/translatewiki
cd /root/translatewiki/puppet
hostnamectl set-hostname web2.translatewiki.net
make apply
# Run puppet again to fix some execution order/dependency issues
make apply

# Reboot the machine enabled the IP configuration.

=== Other stuff ===
* Add accounts for stats.translatewiki.net to /etc/webauth
* Put backup keys in /root/.ssh/
